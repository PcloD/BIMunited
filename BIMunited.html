
<!DOCTYPE html>
<html lang="en">
<head>
<title>BIM</title>
<meta charset="utf-8">

<!--script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script-->
<script src="javascript/jquery.js"></script>
<script src="javascript/jquery-ui.js"></script>

<script data-main="united/BIMunited.js" src="javascript/require/require.js"></script>
<link rel="stylesheet" type="text/css" href="javascript/jquery-ui.theme.css">
<link rel="stylesheet" type="text/css" href="javascript/jquery-ui.structure.css">
<!--link rel="stylesheet" type="text/css" href="kernel/BIMstyle.css"-->

<script type="text/javascript">

function inputHandler(ev){
	ev.preventDefault(); //disable normal form submit behavior that refreshes page
	var i=$("#myInput").val(); //get text from form 
	$("#myInput").val('');
	BIM.input(i); //and pass it to BIM for processing
	return false; //prevent further bubbling of event
};

function initMenus(ids, menuExt){
	var ida=ids.split(" "), js;
	for (var i in ida){
		// Create callback function for each navbutton that 
		// positions it's dropdown menu at it's location.
		// Construct it as a string ...
		// first, hide all menus
		js='$(".menu").hide();'+
		// Show and position menu of interest
		'$("#'+ ida[i] + menuExt + '").show().position('+
		'{my:"left top", at:"left bottom", of:"#'+ida[i]+'"}); '+
		// Dropdown autohide in case a dd is left hanging.  Disabled when dd is entered
		'document.DDAH=setTimeout(function(){$("#'+ ida[i] + menuExt +'").hide();}, 2000);';
		// console.log(js);
		// Register function so triggered by nav button mouseenter event...
		$("#"+ida[i]).mouseenter(new Function('event', js ));
	};
};

$(document).ready(function(){

//setup Navbar using jquery-ui controlgroup widget
$("#navbar").controlgroup({items:{
	//widgetToApply:selector
	"button": "a, button, input[type=text], input[type=button], input[type=submit]",
	"controlgroupLabel": ".ui-controlgroup-label",
	"checkboxradio": "input[type='checkbox'], input[type='radio']",
	"selectmenu": "select",
	//"menu":".dropdown-items",
	"spinner": ".ui-spinner-input"
}});

//set behaviour of dropdown menus... 
$(".menu").menu().css("position","absolute", "width", "200px").hide();

//cleanup any open dropdown menus
$(".menu").on('mouseleave',function(){$(".menu").hide();});
//clear dropdown autohide (DDAH)
$(".menu").on('mouseenter',function(){clearTimeout(document.DDAH);});

//initialize drop-down menus with homemade functions by providing DOM tag ids:
//"file tool..." and extension "-menu" for corresponding drop-downs
//"file-menu tool-menu..."
initMenus("file tool part help", "-menu");

//inhibit the browser's right-click context menu
$(document).on('contextmenu', false);

//Load and launch BIM United FC
requirejs(['BIMunited'], function(BIM){
	var canvas=window.document.getElementById('canvas');
	var board=window.document.getElementById('board');
	// the BIM a.b.c.d.e starter functions...
	BIM.admin({users:['admin','asiddeley','guest']}); 
	BIM.board(board);
	BIM.canvas(canvas);
	BIM.database("database connection API");
	BIM.engage();
});


}); //document ready

</script>

</head>
<body>

<div id="board" class="container-fluid">

<div id="navbar" class="controlgroup ui-widget-header" style="padding:4px; width:792px;">
	<button>BIM United FC</button>
	<button id="file">Files</button>
	<button id="tool">Tools</button>
	<button id="part">Parts</button>	
	<button id="help">Help</button>	
	
	<form onSubmit="return inputHandler(event)">
	<input id="myInput" type="text" placeholder="Command"><input type="submit" value="Ok">
	</form>
	
</div><!-- navbar   -->

<canvas id="canvas" style="width:800px; height:400px;"></canvas>

<ul id="file-menu" class="menu">
	<li><div>Database</div>
	<ul>
		<li><div>Admin</div></li>
		<li><div>Models</div></li>
	</ul>		
	</li>
	<li>--</li>
	<li><div>New</div></li>
	<li><div>Open</div></li>
	<li><div>Open Read-Only</div></li>
	<li><div>Save</div></li>
	<li><div>Save as</div></li>
	<li>--</li>
	<li><div>Exit</div></li>
</ul>

<ul id="tool-menu" class="menu">
	<li onclick="BIM.input('bb')"><div>Blackboard</div></li>
	<li onclick="BIM.input('creater')"><div>Creater</div></li>
	<li><div>Explorer</div></li>
	<li><div>Selecter</div></li>
	<li><div>Tagger</div></li>
	<li><div>Viewer</div></li>
</ul>

<ul id="part-menu" class="menu">
	<li><div>Voxelite</div></li>
	<li><div>Parcela</div></li>
	<li><div>Floor</div></li>
	<li><div>Wall</div></li>
	<li><div>Opening</div></li>
	<li><div>Skybox</div></li>
</ul>

<ul id="help-menu" class="menu">
	<li><div>About</div></li>
	<li><div>User</div>
		<ul>
		<li><div>Overview</div></li>
		<li><div>Command list</div></li>
		<li><div>Documentation</div></li>
		<li><div>Tutorials</div></li>
		</ul>
	</li>
	<li><div>Develper</div>
		<ul>
		<li><div>Dev Overview</div></li>
		<li><div>System events</div></li>
		</ul>		
	</li>
	<li><div>GNU License</div></li>
</ul>

<!--select>
	<option selected disabled>Parts</option>
	<option>voxelite</option>
	<option>slab</option>
	<option>wall</option>
	<option>stair</option>
	<option>opening</option>
	<option>land</option>
	<option>sky</option>
</select-->
</div><!-- board -->



</body>



</html>